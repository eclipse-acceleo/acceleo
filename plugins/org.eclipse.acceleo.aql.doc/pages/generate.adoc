This section describe how to launch a generation from <<eclipse>> or <<_maventycho>>. 
Note that you can also use the <<_debugger>> to run a module or directly use Acceleo 4 programmatically, see <<_generation>>.

=== Eclipse

.Before you Start
[IMPORTANT] 
====
Use a *Java Project* and the classical *Java Perspective* for writing your Acceleo templates `.mtl` in the *src* folder.

You will also need to deploy your metamodels plugins in the running Eclipse and the metamodel projects should not be opened in the current workspace. If you are developing your metamodels or use a target platform, you will need to launch an https://help.eclipse.org/latest/index.jsp?topic=%2Forg.eclipse.pde.doc.user%2Fguide%2Ftools%2Flaunchers%2Feclipse_application_launcher.htm[Eclipse runtime].
====

In order to launch an Acceleo generator, you just have to right-click on your main module and use the *Run As* menu.

image::images/RunAs.png[Run As]

From there the *Launch Configuration* menu will open.
If you already have created a launch configuration you can access the launch configuration menu from the *Run > Run Configurations...* menu.
In this menu, you will have access to the Acceleo Launch configuration. 
You just have to select:

* your main *module file*,
* your input *model file*,
* the *destination folder* of the generation
* the *end of line* you want in your generated document.

image::images/LaunchConfig.png[Launch Configuration]

.After launching the generation
[IMPORTANT]
====
Check that your generation is finished by opening the *Console* view.
The console title should change to `<terminated> traceability (Workspace)[Acceleo4]`.
The last line in the console should be the generation summary `Files: 2, Lost Files: 0, Errors: 0, Warnings: 0, Infos: 0`.
====

=== Maven/Tycho

A sample project is provided to illustrate how an Acceleo generator can be used inside of Eclipse and also in standalone (outside of Eclipse). Note that you can also use Acceleo in a pure standalone environment and without the need of a plug-in project. The source code can be found https://github.com/eclipse-acceleo/acceleo/tree/master/examples/MavenLauncher[here]. All build and generation steps are in different Maven profile in the parent pom file for the purpose of the demonstration, but you can split them in different pom files and build projects if needed.

This example includes:

* A generator project `org.eclipse.acceleo.aql.launcher.sample`,
* A generator project Eclipse UI menu contributions `org.eclipse.acceleo.aql.launcher.sample.ide.ui`,
* A feature including above plug-ins `org.eclipse.acceleo.aql.launcher.sample-feature`,
* An update site including this feature `org.eclipse.acceleo.aql.launcher.sample-site`,
* A `pom.xml` file that can be used to both package the generator and start the generation.

==== Compilation

The first step is to compile our generator plug-in. We will use Maven and Tycho. Tycho is used to build Eclipse plug-ins and manage dependencies form P2 repositories. In this step we will create a P2 repository to install our generator inside of Eclipse and also a Maven repository to launch the generation from Maven. The Maven repository is optional, it's needed to launch the generator in standalone from Maven.

You can run the `compile` profile with the following command:

----
mvn clean deploy -Pcompile
----

It will create a P2 repository that you can install inside of Eclipse `org.eclipse.acceleo.aql.launcher.sample-site/target/repository/`. It also produce a Maven repository that will be used to start the generator main class from Maven `releng/maven/repository-p2/`.

==== Eclipse application

Acceleo provides a specific eclipse application that can be used from command line or Tycho in order to start a generation. To launch the application on our generator, we will need to reference the P2 repository we built in the previous step and add a dependency to our sample generator. If you choose to run your generator in this mode, all Eclipse mechanisms will work, access to the platform, extension points...

The application takes a number of arguments that will have to be customized through the pom.xml file:

----
<applicationsArgs>
	<args>-application</args>
	<args>org.eclipse.acceleo.aql.launcher.AcceleoLauncher</args>
	<args>-data</args>
	<args>${project.build.directory}/wks</args>
	<args>-bundle</args>
	<args>org.eclipse.acceleo.aql.launcher.sample</args>
	<args>-module</args>
	<args>org::eclipse::acceleo::aql::launcher::sample::main</args>
	<args>-models</args>
	<args>platform:/plugin/org.eclipse.acceleo.aql.launcher.sample/model/sample.xmi</args>
	<args>-target</args>
	<args>file:/${project.build.directory}/generated/</args>
</applicationsArgs>
----

application::
Standard Eclipse argument, this tells Eclipse which application it needs to run. The specific launcher for Acceleo generations is `org.eclipse.acceleo.aql.launcher.AcceleoLauncher`.
data::
Standard Eclipse argument, this can be used to modify the workspace path.
bundle::
This needs to be the identifier of the bundle containing the main module for this generation.
module::
The starting point of the generation that is to be started. This needs to the qualified name of the module containing an "@main"-annotated template.
models::
The URI of the models that will be fed to the main module of the generation. This cannot be empty and needs to be an URI that eclipse is capable of resolving. In this example we're using a `platform:/plugin/...` URI since we've bundled the input model into our generator project.
target::
The destination URI for this generation. Generated files will use this folder as their root to resolve against. *Note* that this needs to end in a trailing `/`.

You can run the `generate-eclipse-launcher` profile with the following command:

----
mvn clean verify -Pgenerate-eclipse-launcher
----

==== Standalone main class

This allows you to run your generator in a standalone fashion. If you have Eclipse specific code in your generator or services, you won't be able to run the generator in standalone. You will need to <<tool.adoc#_java_launchers,generated the main class>> to use it in your Maven configuration:

In this profile we need to reference the Maven repository built in the first step and add a dependency to the generator.

----
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>exec-maven-plugin</artifactId>
  <version>3.5.0</version>
  <executions>
    <execution>
      <goals>
        <goal>java</goal>
      </goals>
    </execution>
  </executions>
  <configuration>
    <mainClass>org.eclipse.acceleo.aql.launcher.sample.MainGenerator</mainClass>
    <arguments>
      <argument>org.eclipse.acceleo.aql.launcher.sample/model/sample.xmi</argument>
      <argument>${project.build.directory}/generated/</argument>
    </arguments>
  </configuration>
</plugin>
----

You can run the `generate-maven-main-class` profile with the following command:

----
mvn clean exec:java -Pgenerate-maven-main-class
----

