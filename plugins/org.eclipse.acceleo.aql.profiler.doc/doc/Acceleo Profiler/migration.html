<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="author" content="Acceleo 3 to Acceleo 4 migration guide">
<title>Acceleo</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1>Acceleo</h1>
<div class="details">
<span id="author" class="author">Acceleo 3 to Acceleo 4 migration guide</span><br>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_preface">1. Preface</a>
<ul class="sectlevel2">
<li><a href="#_intended_audience">1.1. Intended Audience</a></li>
</ul>
</li>
<li><a href="#_how_to_migrate_acceleo_3_templates_to_acceleo_4">2. How to migrate Acceleo 3 templates to Acceleo 4</a>
<ul class="sectlevel2">
<li><a href="#_the_migration_tool">2.1. The migration tool</a></li>
<li><a href="#_launching_a_migration">2.2. Launching a migration</a></li>
</ul>
</li>
<li><a href="#_language_changes">3. Language Changes</a>
<ul class="sectlevel2">
<li><a href="#_modules">3.1. Modules</a></li>
<li><a href="#_templates">3.2. Templates</a></li>
<li><a href="#_query">3.3. Query</a></li>
<li><a href="#_file_block">3.4. File Block</a></li>
<li><a href="#_for_block">3.5. For Block</a></li>
<li><a href="#_let_statement">3.6. Let Statement</a></li>
<li><a href="#_elselet_blocks">3.7. ElseLet Blocks</a></li>
<li><a href="#_invocation">3.8. Invocation</a></li>
<li><a href="#_module_element_call">3.9. Module Element Call</a></li>
<li><a href="#_variable">3.10. Variable</a></li>
<li><a href="#_expressions">3.11. Expressions</a></li>
<li><a href="#_set_and_bags">3.12. Set and Bags</a></li>
</ul>
</li>
<li><a href="#_behavior_changes">4. Behavior Changes</a>
<ul class="sectlevel2">
<li><a href="#_modules_2">4.1. Modules</a></li>
<li><a href="#_query_3">4.2. Query</a></li>
<li><a href="#_let_statement_2">4.3. Let Statement</a></li>
</ul>
</li>
<li><a href="#_limitations">5. Limitations</a>
<ul class="sectlevel2">
<li><a href="#_comments">5.1. Comments</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_preface">1. Preface</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_intended_audience">1.1. Intended Audience</h3>
<div class="paragraph">
<p>This guide was written to describe the behavior changes between the two versions of Acceleo, for the purpose of migrating from one to the next.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_migrate_acceleo_3_templates_to_acceleo_4">2. How to migrate Acceleo 3 templates to Acceleo 4</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_the_migration_tool">2.1. The migration tool</h3>
<div class="paragraph">
<p>The migration tool consists on a java standalone utility deployed as a jar file, "migrator.jar". There is a library folder aside containing all of the required jars (Acceleo 3, Acceleo 4) required to perform a migration.</p>
</div>
</div>
<div class="sect2">
<h3 id="_launching_a_migration">2.2. Launching a migration</h3>
<div class="paragraph">
<p>The migration tool requires a fully built Acceleo 3 project as input: the project folder must contain a bin/ folder with all of the compiled (.emtl) versions of the .mtl source files.</p>
</div>
<div class="paragraph">
<p>The migration jar can be run in command line with the following arguments. We assume we are in the folder containing the migration jar, and that the Acceleo project is at the same level. There is also an empty "output" folder to receive the result of the migration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>java -jar migrator.jar &lt;myproject&gt;/&lt;sourcefolder&gt; &lt;output_folder&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>For instance, for an Acceleo 3 project in which the source templates are in the src/ folder (anywhere in the sub-folders of src/):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>java -jar migrator.jar myProject/src output</pre>
</div>
</div>
<div class="paragraph">
<p>The converted .mtl files will be created in the output folder, accordingly to the folder structure in the source project.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_language_changes">3. Language Changes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_modules">3.1. Modules</h3>
<div class="sect3">
<h4 id="_module_name">3.1.1. module name</h4>
<div class="paragraph">
<p>Acceleo 3 allowed users to set the fully qualified name of the module in its declaration, such as</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[module qualified::module::name(...)]</pre>
</div>
</div>
<div class="paragraph">
<p>Acceleo 4 forbids anything other than the actual module name and this will thus become.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[module name(...)]</pre>
</div>
</div>
<div class="paragraph">
<p>Both versions require the module name to be equal to the name of the containing file minus the extension.</p>
</div>
</div>
<div class="sect3">
<h4 id="_multiple_inheritance">3.1.2. multiple inheritance</h4>
<div class="paragraph">
<p>The Acceleo 3 module declaration allowed users to declare multiple "extends" modules:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[module qualified::module::name(...) extends another::module, and::a:second::module]</pre>
</div>
</div>
<div class="paragraph">
<p>Acceleo 4 modules can only define a single extended module.</p>
</div>
<div class="paragraph">
<p><strong>Only the first extended module was taken into account</strong> in Acceleo 3 so the migration just strips all but the first extended modules' name.</p>
</div>
</div>
<div class="sect3">
<h4 id="_module_imports">3.1.3. module imports</h4>
<div class="paragraph">
<p>Acceleo 3 allowed imports of modules through unqualified names. This is forbidden in Acceleo 4 and the fully qualified names of the imports are required.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_templates">3.2. Templates</h3>
<div class="paragraph">
<p><strong>Important notes:</strong> Every template which had duplicated signatures (same name, same argument list, different pre-condition) needs to be manually checked after migration.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Acceleo 4 does not allow duplicated signatures and has no pre-condition, so duplicated templates might have to be combined into a single one with their pre-condition as an <code>If-Else</code> block inside.</p>
</li>
<li>
<p>Initialization blocks could be different on duplicated templates, depending on the pre-condition. The migrated <code>Let</code> block thus needs to be different per branch of the above <code>If-Else</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Acceleo 4 templates will automatically override their super-module templates if the signature matches. This was not the case in Acceleo 3 and matching templates thus need verified manually.</p>
</div>
<div class="sect3">
<h4 id="_overriding">3.2.1. Overriding</h4>
<div class="paragraph">
<p>Acceleo 3 templates allowed users to override an arbitrary template through the "overrides" keyword:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[template public aTemplateName(...) overrides anotherTemplateName]</pre>
</div>
</div>
<div class="paragraph">
<p>Acceleo 4 only allows a template of name "xyz" to override a template from the extended module with the same "xyz" name.</p>
</div>
<div class="paragraph">
<p>Furthermore, Acceleo 4 templates will automatically override their super-module&#8217;s public or protected templates if they have the same signature.</p>
</div>
</div>
<div class="sect3">
<h4 id="_pre_conditions">3.2.2. Pre-conditions</h4>
<div class="paragraph">
<p>Acceleo 4 does not allow pre-conditions on templates.</p>
</div>
</div>
<div class="sect3">
<h4 id="_post_treatment">3.2.3. Post-treatment</h4>
<div class="paragraph">
<p>Acceleo 3 used an implicit String-typed variable so the post expression could be a simple call without a variable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[template public aTemplateName(...) post (trim())]</pre>
</div>
</div>
<div class="paragraph">
<p>Acceleo 4 doesn&#8217;t allow implicit variables. The result of the template call will be stored in the <code>self</code> variable and the migration will thus transform this expression into:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[template public aTemplateName(...) post (self.trim())]</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_init_block">3.2.4. Init block</h4>
<div class="paragraph">
<p>Acceleo 3 allowed variable initialization blocks on the template:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[template public aTemplateName(...) {var1 = 'string'; var2 = param1.feature;}]</pre>
</div>
</div>
<div class="paragraph">
<p>Acceleo 4 removes the initialization blocks altogether, so the variable declarations must be manually transformed into a <code>let</code> block at the start of the template (this is not supported by the migration tool).</p>
</div>
</div>
<div class="sect3">
<h4 id="_namesakes">3.2.5. Namesakes</h4>
<div class="paragraph">
<p>Acceleo 3 allowed multiple templates with the same name and same argument list to co-exist within the same module, as long as their pre-condition differed.</p>
</div>
<div class="paragraph">
<p>Though Acceleo 4 will allow multiple templates with the same signature to exist in a module, only the last one will ever be resolved for a call or override, all subsequent being ignored.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_query">3.3. Query</h3>
<div class="sect3">
<h4 id="_java_services">3.3.1. Java services</h4>
<div class="paragraph">
<p>The best practice for Acceleo 3 was to wrap java services inside of a query. The special <code>invoke</code> service was used to this end.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[query public hasStereotype(element : uml::Element, stereotypeName : String) : Boolean =
	invoke('org.eclipse.acceleo.module.sample.services.UMLServices', 'hasStereotype(org.eclipse.uml2.uml.Element, java.lang.String)', Sequence{element, stereotypeName})
/]</pre>
</div>
</div>
<div class="paragraph">
<p>Acceleo 4 allows users to directly import java services.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_file_block">3.4. File Block</h3>
<div class="paragraph">
<p>The second argument for the file block in Acceleo 3 was a boolean (false = overwrite the file, true = append at the end of the file).</p>
</div>
<div class="paragraph">
<p>Acceleo 4 uses an enumeration, which allows the keyword "overwrite", "append" or "create" instead.</p>
</div>
</div>
<div class="sect2">
<h3 id="_for_block">3.5. For Block</h3>
<div class="sect3">
<h4 id="_simplified_syntax">3.5.1. Simplified Syntax</h4>
<div class="paragraph">
<p>Acceleo 3 allowed for loops in two formats:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[for (i : E | expr)]...[/for]</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[for (expr)]...[/for]</pre>
</div>
</div>
<div class="paragraph">
<p>In the second case, the loop variable was <code>self</code>.</p>
</div>
<div class="paragraph">
<p>Acceleo 4 only allows for the first of these two formats. Note that typing the iteration variable is optional in Acceleo 4.</p>
</div>
</div>
<div class="sect3">
<h4 id="_iteration_count">3.5.2. Iteration count</h4>
<div class="paragraph">
<p>Acceleo 3 defined an implicit variable, <code>i</code>, that held the current iteration count.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[for (feature : ecore::EStructuralFeature | class.eStructuralFeatures)]
iteration number [i/]
[/for]</pre>
</div>
</div>
<div class="paragraph">
<p>Acceleo 4 does not define any similar variable.</p>
</div>
</div>
<div class="sect3">
<h4 id="_before_separator_after">3.5.3. before, separator, after</h4>
<div class="paragraph">
<p>Acceleo 3 allowed users to specify a <code>before</code> expression that would be inserted right before the content generated by the loop body <em>if the loop had any iteration</em>. An <code>after</code> that would similarly inserted after the loop body if it generated any content, and finally a <code>separator</code> which content would be inserted in-between each iteration result.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[for (number : Integer | Sequence{1, 2, 3}) before ('int[] array = new int[') separator (', ') after ('];')][number/][/for]</pre>
</div>
</div>
<div class="paragraph">
<p>Acceleo 4 only supports <code>separator</code>. This is not supported by the migration tool. To translate that in Acceleo 4 you could convert <code>before</code> and <code>after</code> into a <code>Let</code> holding the content of the iteration expression, then a <code>If</code> only generating before and after if the collection is not empty.</p>
</div>
</div>
<div class="sect3">
<h4 id="_pre_condition">3.5.4. Pre-condition</h4>
<div class="paragraph">
<p>Acceleo 3 allowed users to specify a pre-condition that would be evaluated every iteration and that would prevent all generation for that iteration if <code>false</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[for (number : Integer | Sequence{1, 2, 3}) ? (isEven(number))]
[number/]
[/for]</pre>
</div>
</div>
<div class="paragraph">
<p>Acceleo 4 does not have pre-conditions. This could be manually converted to an <code>If</code> at the start of the for body (this is not supported by the migration tool).</p>
</div>
</div>
<div class="sect3">
<h4 id="_init_block_2">3.5.5. Init block</h4>
<div class="paragraph">
<p>Acceleo 3 allowed variable initialization blocks on the for:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[for (feature : ecore::EStructuralFeature | class.eStructuralFeatures) {var : String = 'string'; className : String = class.name;}]
[number/]
[/for]</pre>
</div>
</div>
<div class="paragraph">
<p>Acceleo 4 removes the initialization blocks altogether, so the variable declarations must be manually transformed into a <code>let</code> block before the <code>For</code> block (this is not supported by the migration tool).</p>
</div>
<div class="paragraph">
<p><strong>Note</strong> the initialization block was evaluated before the for itself, and not for every loop.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ranges">3.5.6. Ranges</h4>
<div class="paragraph">
<p>Acceleo 4 does not support ranges, e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[for (item : Integer | Sequence{1..5})]
[item/]
[/for]</pre>
</div>
</div>
<div class="paragraph">
<p>Such for blocks are ignored by the migration tool.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_let_statement">3.6. Let Statement</h3>
<div class="paragraph">
<p>Acceleo 3 only allowed a single variable per <code>Let</code>, forcing users to have multiple nested <code>Let</code> blocks to define more. The migration could aggregate multiple nested blocks into one with multiple variables if the nested blocks don&#8217;t use one of the outer `Let&#8217;s variable.</p>
</div>
</div>
<div class="sect2">
<h3 id="_elselet_blocks">3.7. ElseLet Blocks</h3>
<div class="paragraph">
<p>Acceleo 4 does not support elselet blocks, they are ignored by the migration tool.</p>
</div>
</div>
<div class="sect2">
<h3 id="_invocation">3.8. Invocation</h3>
<div class="paragraph">
<p>Acceleo 3 made use of implicit variables allowing module writers to avoid always specifying the target of an expression or call:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[template public generate(class : ecore::EClass)]
[name/] is equivalent to [class.name/] or [self.name/]
[eAllContents()/] is equivalent to [class.eAllContents()/] or [self.eAllContents()/]
[/template]</pre>
</div>
</div>
<div class="paragraph">
<p>The implicit variable is always <code>self</code>, but the value of <code>self</code> may not be intuitive in all cases.</p>
</div>
<div class="paragraph">
<p>The migration replaces the implicit variable with the correct variable for Acceleo 4.</p>
</div>
<div class="sect3">
<h4 id="_template">3.8.1. Template</h4>
<div class="paragraph">
<p>Acceleo 3 : <code>self</code> is the first argument of the template.</p>
</div>
<div class="paragraph">
<p>Acceleo 4 : The migration tool makes the variable explicit, using the first argument of the template</p>
</div>
</div>
<div class="sect3">
<h4 id="_query_2">3.8.2. Query</h4>
<div class="paragraph">
<p>Acceleo 3 : <code>self</code> is the first argument of the query.</p>
</div>
<div class="paragraph">
<p>Acceleo 4 : The migration tool makes the variable explicit, using the first argument of the query</p>
</div>
</div>
<div class="sect3">
<h4 id="_for">3.8.3. For</h4>
<div class="paragraph">
<p>Acceleo 3 : <code>self</code> has the same value as the iteration variable.</p>
</div>
<div class="paragraph">
<p>Acceleo 4 : The migration tool makes the variable explicit, using the iteration variable</p>
</div>
</div>
<div class="sect3">
<h4 id="_if">3.8.4. If</h4>
<div class="paragraph">
<p>Acceleo 3 : The value of <code>self</code> is not changed within the <code>if</code> scope and remains the value of <code>self</code> outside of the <code>if</code>.</p>
</div>
<div class="paragraph">
<p>Acceleo 4 : The migration tool makes the variable explicit, using the parent context</p>
</div>
</div>
<div class="sect3">
<h4 id="_let">3.8.5. let</h4>
<div class="paragraph">
<p>Acceleo 3 : The value of <code>self</code> is not changed within the <code>let</code> scope and remains the value of <code>self</code> outside of the <code>let</code>.</p>
</div>
<div class="paragraph">
<p>Acceleo 4 : The migration tool makes the variable explicit, using the parent context</p>
</div>
</div>
<div class="sect3">
<h4 id="_expression">3.8.6. Expression</h4>
<div class="paragraph">
<p>Acceleo 3/OCL : The value of <code>self</code> is defined by the current Acceleo scope and will not be altered by OCL.</p>
</div>
<div class="paragraph">
<p>Acceleo 4/AQL : The migration tool makes the variable explicit, using the parent context</p>
</div>
<div class="paragraph">
<p>You can have a look at the MTL to AQL <a href="https://www.eclipse.org/acceleo/documentation/aql.html#MigratingfromMTLqueries">migration guide</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_module_element_call">3.9. Module Element Call</h3>
<div class="sect3">
<h4 id="_template_invocation">3.9.1. Template invocation</h4>
<div class="paragraph">
<p>Acceleo 3 allowed special template calls such as the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[template public aTemplate()]
	[anotherTemplate() before ('inserted before generated body') separator ('in-between') after ('inserted after generated body')/]
[/template]

[template protected anotherTemplate()]
	generated body
[/template]</pre>
</div>
</div>
<div class="paragraph">
<p>Both <code>before</code> and <code>after</code> expression are handled by Acceleo 3 and will respectively generate their content before and after the callee&#8217;s generated text. This is true even if the callee does not generate any text.</p>
</div>
<div class="paragraph">
<p><code>separator</code> is not implemented by the engine so the migration strips it entirely.</p>
</div>
</div>
<div class="sect3">
<h4 id="_query_invocation">3.9.2. Query invocation</h4>
<div class="paragraph">
<p>Similar to template invocations, query invocations support <code>before</code>, <code>separator</code> and <code>after</code> expressions. None of which is implemented in the Acceleo 3 generation engine so they are stripped entirely.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_variable">3.10. Variable</h3>
<div class="paragraph">
<p>Acceleo 3 supported unqualified type names for the variables.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[let var : EPackage = anotherVar.eContainer()]
	output text for EPackage named [var.name/]
[/let]</pre>
</div>
</div>
<div class="paragraph">
<p>Acceleo 4 only accepts qualified types for the classifiers and the above becomes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[let var : ecore::EPackage = anotherVar.eContainer()]
	output text for EPackage named [var.name/]
[/let]</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_expressions">3.11. Expressions</h3>
<div class="paragraph">
<p>Acceleo 3 was using OCL as the underlying expression language, while Acceleo 4 is using AQL. Please look at the <a href="https://www.eclipse.org/acceleo/documentation/#MigratingfromMTLqueries">AQL Documentation</a> for more information on migrating OCL expressions to AQL.</p>
</div>
</div>
<div class="sect2">
<h3 id="_set_and_bags">3.12. Set and Bags</h3>
<div class="paragraph">
<p>The OCL collection types Set and Bag are not anymore available in AQL, which supports only two types: Sequence and OrderedSet. All collections are ordered.
Thus the migration tool translates each Set into an OrderedSet and each Bag into a Sequence.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_behavior_changes">4. Behavior Changes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_modules_2">4.1. Modules</h3>
<div class="sect3">
<h4 id="_inheritance_behavior">4.1.1. inheritance behavior</h4>
<div class="paragraph">
<p>In Acceleo 3, once an overriding module (child) called a public or protected template of its extended module (parent), the execution flow would never come down to the child again until we <code>returned</code> out of the callee. This is contrary to other Object-oriented languages in which a <code>super</code> template could call down an <code>overriden</code> other template from the child when necessary.</p>
</div>
<div class="paragraph">
<p>If you consider the following simplified modules:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[module parentModule()/]

[template public aTemplate()]
	[anotherTemplate()/]
[/template]

[template protected anotherTemplate()]
	parent behavior
[/template]</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[module childModule() extends parentModule/]

[template public main()]
	[aTemplate()/]
[/template]

[template protected anotherTemplate()]
	child behavior
[/template]</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_query_3">4.2. Query</h3>
<div class="sect3">
<h4 id="_validation">4.2.1. Validation</h4>
<div class="paragraph">
<p>In Acceleo 3, the return type of a query was not validated at compile time, so it was very easy for ClassCastExceptions to occur at runtime or for invalid templates to be written with the error only detected at runtime.</p>
</div>
<div class="paragraph">
<p>For example, the following will fail when we try to generate, but is valid for the compiler:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[template public generate(c : ecore::EClass)]
	[file (c.name.concat('.java'), false, 'UTF-8')]
	[for (attribute : ecore::EAttribute | getFeatures(c))]
		attribute name : [attribute.name/] [if (attribute.iD)]is id attribute[/if]
	[/for]
	[/file]
[/template]

[query private getFeatures(c : ecore::EClass) : Set(ecore::EAttribute) = c.eStructuralFeatures/]</pre>
</div>
</div>
<div class="paragraph">
<p>The template expected "getFeatures" to return a Set of Attributes, but the actual type is a set of EStructuralFeature. This will fail as soon as we try to generate for a class containing both attributes and references.</p>
</div>
<div class="paragraph">
<p>Acceleo 4 validates the return type of the query&#8217;s body expression.</p>
</div>
</div>
<div class="sect3">
<h4 id="_cache">4.2.2. Cache</h4>
<div class="paragraph">
<p>The MTL specification enforces that "A query is required to produce the same result each time it is invoked with the same arguments.". The result of a query call was thus cached in Acceleo 3, and never reevaluated. (This behavior could be disabled through a preference for Acceleo 3.)</p>
</div>
<div class="paragraph">
<p>Acceleo 4 will always reevaluate the query&#8217;s body even if the same argument list is passed twice.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_let_statement_2">4.3. Let Statement</h3>
<div class="paragraph">
<p>The Acceleo 3 let statement was equivalent to an "instance of" condition check to enter a block.</p>
</div>
<div class="paragraph">
<p>If we consider the following let block:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[let var : EPackage = anotherVar.eContainer()]
	output text for EPackage named [var.name/]
[/let]</pre>
</div>
</div>
<div class="paragraph">
<p>In Acceleo 3, if the result of evaluating <code>anotherVar.eContainer()</code> is of type <code>EPackage</code> (the declared type of variable <code>var</code>), then this block will output the result of evaluating its body. In any other event, this would output no text and cause no failure as the block would be simply ignored if the types do not match.</p>
</div>
<div class="paragraph">
<p>In Acceleo 4, this same let block will cause validation errors if the type of <code>anotherVar.eContainer()</code> cannot be an <code>EPackage</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_limitations">5. Limitations</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_comments">5.1. Comments</h3>
<div class="paragraph">
<p>Comments are mostly ignored by the migration tool, except for module / template / queries documentation.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-07-31 12:51:43 +0200
</div>
</div>
</body>
</html>